<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>로그인</h1>
    <form name="myform">
        <label for="userId">ID</label>
        <br><input type="text" id="userId"><br>

        <label for="passwd">패스워드</label>
        <br><input type="password" id="passwd"><br>

        <input type="submit" value="login" onclick="getInput()">
    </form>

    <script>
        // 로그인 정보를 저장한 배열 (아이디와 비밀번호)
        const loginInfo = [
            { id: "qkralsrb", pw: "1234" },
            { id: "alsrb", pw: "5678" },
            { id: "alsrb1", pw: "4358" },
            { id: "asdf", pw: "7305" },
            { id: "qwer", pw: "8321" },
        ];

        document.myform.addEventListener("submit", (e) => {
            e.preventDefault();

            const inputId = document.myform.userId.value;
            const inputPw = document.myform.passwd.value;

            // let flag = false;
            //     for (let u of loginInfo) {
            //         if (u.id === inputId) {
            //             flag = true;
            //             if (u.pw === inputPw) {
            //                 alert("로그인 성공! 환영합니다" + inputId + "님");
            //             } else {
            //                 alert("패스워드가 일치하지 않습니다.");
            //             }
            //             break;
            //         }
            //     }
            //     if (!flag) {
            //         alert("없는 아이디 입니다.");
            //     }

            // });


            //--------------------------------------------------------------------------------------------------------

            //     //forEach()는 자바스크립트의 배열 메소드로, 배열의 각 요소에 대해 제공된 콜백 함수를 한 번씩 실행합니다. forEach()는 배열의 모든 항목을 순회할 때 유용하며, 기본적으로 반환값이 없고, 배열의 각 요소를 처리하는 데에 사용됩니다.

            //     let user = null;
            //     loginInfo.forEach((u) => { //forEach 활용법
            //         if (u.id === inputId) {
            //             user = u;
            //         }
            //     });

            //     // 만약 순서를 바꾼다면, 예를 들어 if (user.pw === inputPw)가 먼저 실행되면 아이디가 없더라도 비밀번호 오류 메시지가 출력될 수 있습니다. 이는 사용자 경험을 크게 해칠 수 있기 때문에 반드시 아이디 확인을 먼저 해야 합니다.
            //     if (user === null) {
            //         alert("없는 아이디 입니다.");
            //         return; // return값 없이 함수를 종료하는 법
            //     }
            //     if (user.pw === inputPw) {
            //         alert("로그인에 성공하였습니다.");
            //     } else {
            //         alert("패스워드가 일치 하지 않습니다.");
            //     }

            // });

            //--------------------------------------------------------------------------------------------------------

            //find()는 JavaScript의 배열 메소드 중 하나로, 배열을 순회하면서 주어진 조건을 만족하는 첫 번째 요소를 반환합니다. 만약 조건을 만족하는 요소가 없으면 undefined를 반환합니다.


            let user = loginInfo.find((u) => u.id === inputId);

            // 만약 순서를 바꾼다면, 예를 들어 if (user.pw === inputPw)가 먼저 실행되면 아이디가 없더라도 비밀번호 오류 메시지가 출력될 수 있습니다. 이는 사용자 경험을 크게 해칠 수 있기 때문에 반드시 아이디 확인을 먼저 해야 합니다.
            if (!user) {
                alert("없는 아이디 입니다.");
                return; // return값 없이 함수를 종료하는 법
            }
            if (user.pw === inputPw) {
                alert("로그인에 성공하였습니다.");
            } else {
                alert("패스워드가 일치 하지 않습니다.");
            }

        });
        //--------------------------------------------------------------------------------------------------------


        // document.myform.addEventListener("submit", getInput);  // 폼 제출 이벤트에 리스너 추가 //myform = form name이다.

        // function getInput(e) {
        //     // 폼 제출 시 페이지 새로고침을 막기 위해 사용 (기본 동작을 막음)
        //     e.preventDefault();
        //     let userid = document.getElementById("userId").value;  // 사용자 아이디를 입력 폼에서 가져옴
        //     let userpw = document.getElementById("passwd").value; // 사용자 비밀번호를 입력 폼에서 가져옴
        //     let flag = false;

        // for let of 방법
        // loginInfo 배열을 순회하며 사용자 입력과 비교
        //     for (let i of loginInfo) {  // loginInfo 배열을 하나씩 순차적으로 검사
        //         if (i.id === userid) {  // 아이디가 일치하는지 확인

        //             flag = true;  // 아이디가 일치하면 flag를 true로 설정 (아이디를 찾음)
        //             if (i.pw === userpw) { // 아이디가 일치하면 비밀번호도 비교
        //                 alert("로그인에 성공하였습니다!");
        //                 break; // 로그인 성공하면 더 이상 다른 아이디를 확인할 필요가 없으므로 반복문 종료
        //             } else {
        //                 alert("패스워드가 틀렸습니다.");
        //                 break; // 비밀번호가 틀리면 반복문 종료
        //             }
        //         }
        //     }

        //     // for문이 끝나고 정보를 넣는 이유는 loginInfo 안에 있는 아이디,패스워드를 다 확인해보고 값을 넣어야 하기 때문이다.
        //     // 만약 로그인 정보에서 해당 아이디를 찾지 못했다면

        //     if (!flag) { // flag가 false인 경우 (아이디가 없다면)
        //         alert("아이디가 없습니다.");
        //     }

        // }
        //--------------------------------------------------------------------------------------------------------


        // 1.사용자가 id를 입력 2. 사용자가 pw를 입력 3. 둘 다 맞을 시 로그인 성공
        // 4. pw가 틀릴시 비밀번호가 틀렸습니다.   5. id가 틀릴시 id가틀렸씁니다

    </script>

</body>

</html>